{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { isArray, getEntries, normalizeXMLName, indent, stripHTML, assert, getKeys } from './utils';\nexport function _createFieldsMapper(fields) {\n  if (!fields || isArray(fields) && !fields.length || !isArray(fields) && !getKeys(fields).length) return function (item) {\n    return item;\n  };\n  var mapper = isArray(fields) ? fields.reduce(function (map, key) {\n    var _a;\n\n    return __assign(__assign({}, map), (_a = {}, _a[key] = key, _a));\n  }, Object.create(null)) : fields;\n  return function (item) {\n    if (isArray(item)) {\n      return item.map(function (i) {\n        return getEntries(i).reduce(function (map, _a) {\n          var _b = __read(_a, 2),\n              key = _b[0],\n              value = _b[1];\n\n          if (key in mapper) {\n            map[mapper[key]] = value;\n          }\n\n          return map;\n        }, Object.create(null));\n      }).filter(function (i) {\n        return getKeys(i).length;\n      });\n    }\n\n    return getEntries(item).reduce(function (map, _a) {\n      var _b = __read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n\n      if (key in mapper) {\n        map[mapper[key]] = value;\n      }\n\n      return map;\n    }, Object.create(null));\n  };\n}\nexport function _prepareData(data) {\n  var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide a valid JSON';\n\n  try {\n    return typeof data === 'string' ? JSON.parse(data) : data;\n  } catch (_a) {\n    throw new Error(MESSAGE_VALID_JSON_FAIL);\n  }\n}\nexport function _createJSONData(data, replacer, space) {\n  if (replacer === void 0) {\n    replacer = null;\n  }\n\n  var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide valid JSON object';\n\n  try {\n    return JSON.stringify(data, replacer, space);\n  } catch (_a) {\n    throw new Error(MESSAGE_VALID_JSON_FAIL);\n  }\n}\nexport function _createTableMap(data) {\n  return data.map(getEntries).reduce(function (tMap, rowKVs, rowIndex) {\n    return rowKVs.reduce(function (map, _a) {\n      var _b = __read(_a, 2),\n          key = _b[0],\n          value = _b[1];\n\n      var columnValues = map[key] || Array.from({\n        length: data.length\n      }).map(function (_) {\n        return '';\n      });\n      columnValues[rowIndex] = (typeof value !== 'string' ? JSON.stringify(value) : value) || '';\n      map[key] = columnValues;\n      return map;\n    }, tMap);\n  }, Object.create(null));\n}\nexport function _createTableEntries(tableMap, beforeTableEncode) {\n  if (beforeTableEncode === void 0) {\n    beforeTableEncode = function (i) {\n      return i;\n    };\n  }\n\n  return beforeTableEncode(getEntries(tableMap).map(function (_a) {\n    var _b = __read(_a, 2),\n        fieldName = _b[0],\n        fieldValues = _b[1];\n\n    return {\n      fieldName: fieldName,\n      fieldValues: fieldValues\n    };\n  }));\n}\nexport function createCSVData(data, delimiter, beforeTableEncode) {\n  if (delimiter === void 0) {\n    delimiter = ',';\n  }\n\n  if (beforeTableEncode === void 0) {\n    beforeTableEncode = function (i) {\n      return i;\n    };\n  }\n\n  if (!data.length) return '';\n\n  var tableMap = _createTableMap(data);\n\n  var tableEntries = _createTableEntries(tableMap, beforeTableEncode);\n\n  var head = tableEntries.map(function (_a) {\n    var fieldName = _a.fieldName;\n    return fieldName;\n  }).join(delimiter) + '\\r\\n';\n  var columns = tableEntries.map(function (_a) {\n    var fieldValues = _a.fieldValues;\n    return fieldValues;\n  }).map(function (column) {\n    return column.map(function (value) {\n      return \"\\\"\" + value.replace(/\\\"/g, '\"\"') + \"\\\"\";\n    });\n  });\n  var rows = columns.reduce(function (mergedColumn, column) {\n    return mergedColumn.map(function (value, rowIndex) {\n      return \"\" + value + delimiter + column[rowIndex];\n    });\n  });\n  return head + rows.join('\\r\\n');\n}\nexport function _renderTableHTMLText(data, beforeTableEncode) {\n  assert(data.length > 0);\n\n  var tableMap = _createTableMap(data);\n\n  var tableEntries = _createTableEntries(tableMap, beforeTableEncode);\n\n  var head = tableEntries.map(function (_a) {\n    var fieldName = _a.fieldName;\n    return fieldName;\n  }).join('</b></th><th><b>');\n  var columns = tableEntries.map(function (_a) {\n    var fieldValues = _a.fieldValues;\n    return fieldValues;\n  }).map(function (column) {\n    return column.map(function (value) {\n      return \"<td>\" + value + \"</td>\";\n    });\n  });\n  var rows = columns.reduce(function (mergedColumn, column) {\n    return mergedColumn.map(function (value, rowIndex) {\n      return \"\" + value + column[rowIndex];\n    });\n  });\n  return \"\\n    <table>\\n      <thead>\\n        <tr><th><b>\" + head + \"</b></th></tr>\\n      </thead>\\n      <tbody>\\n        <tr>\" + rows.join(\"</tr>\\n        <tr>\") + \"</tr>\\n      </tbody>\\n    </table>\\n  \";\n}\nexport function createXLSData(data, beforeTableEncode) {\n  if (beforeTableEncode === void 0) {\n    beforeTableEncode = function (i) {\n      return i;\n    };\n  }\n\n  if (!data.length) return '';\n  var content = \"<html>\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n  </head >\\n  <body>\\n    \" + _renderTableHTMLText(data, beforeTableEncode) + \"\\n  </body>\\n</html >\\n\";\n  return content;\n}\nexport function createXMLData(data) {\n  var content = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><!DOCTYPE base>\\n\" + _renderXML(data, 'base') + \"\\n\";\n  return content;\n}\n\nfunction _renderXML(data, tagName, arrayElementTag, spaces) {\n  if (arrayElementTag === void 0) {\n    arrayElementTag = 'element';\n  }\n\n  if (spaces === void 0) {\n    spaces = 0;\n  }\n\n  var tag = normalizeXMLName(tagName);\n  var indentSpaces = indent(spaces);\n\n  if (data === null || data === undefined) {\n    return indentSpaces + \"<\" + tag + \" />\";\n  }\n\n  var content = isArray(data) ? data.map(function (item) {\n    return _renderXML(item, arrayElementTag, arrayElementTag, spaces + 2);\n  }).join('\\n') : typeof data === 'object' ? getEntries(data).map(function (_a) {\n    var _b = __read(_a, 2),\n        key = _b[0],\n        value = _b[1];\n\n    return _renderXML(value, key, arrayElementTag, spaces + 2);\n  }).join('\\n') : indentSpaces + '  ' + stripHTML(String(data));\n  var contentWithWrapper = indentSpaces + \"<\" + tag + \">\\n\" + content + \"\\n\" + indentSpaces + \"</\" + tag + \">\";\n  return contentWithWrapper;\n}","map":{"version":3,"sources":["C:/Users/scui/Documents/GitHub/metal-price-frontend/node_modules/export-from-json/dist/esm/converters.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__read","o","m","Symbol","iterator","r","ar","e","next","done","push","value","error","isArray","getEntries","normalizeXMLName","indent","stripHTML","assert","getKeys","_createFieldsMapper","fields","item","mapper","reduce","map","key","_a","create","_b","filter","_prepareData","data","MESSAGE_VALID_JSON_FAIL","JSON","parse","Error","_createJSONData","replacer","space","stringify","_createTableMap","tMap","rowKVs","rowIndex","columnValues","Array","from","_","_createTableEntries","tableMap","beforeTableEncode","fieldName","fieldValues","createCSVData","delimiter","tableEntries","head","join","columns","column","replace","rows","mergedColumn","_renderTableHTMLText","createXLSData","content","createXMLData","_renderXML","tagName","arrayElementTag","spaces","tag","indentSpaces","undefined","String","contentWithWrapper"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { isArray, getEntries, normalizeXMLName, indent, stripHTML, assert, getKeys } from './utils';\nexport function _createFieldsMapper(fields) {\n    if (!fields\n        || isArray(fields) && !fields.length\n        || !isArray(fields) && !getKeys(fields).length)\n        return function (item) { return item; };\n    var mapper = isArray(fields)\n        ? fields.reduce(function (map, key) {\n            var _a;\n            return (__assign(__assign({}, map), (_a = {}, _a[key] = key, _a)));\n        }, Object.create(null))\n        : fields;\n    return function (item) {\n        if (isArray(item)) {\n            return item\n                .map(function (i) { return getEntries(i).reduce(function (map, _a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                if (key in mapper) {\n                    map[mapper[key]] = value;\n                }\n                return map;\n            }, Object.create(null)); })\n                .filter(function (i) { return getKeys(i).length; });\n        }\n        return getEntries(item).reduce(function (map, _a) {\n            var _b = __read(_a, 2), key = _b[0], value = _b[1];\n            if (key in mapper) {\n                map[mapper[key]] = value;\n            }\n            return map;\n        }, Object.create(null));\n    };\n}\nexport function _prepareData(data) {\n    var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide a valid JSON';\n    try {\n        return (typeof data === 'string' ? JSON.parse(data) : data);\n    }\n    catch (_a) {\n        throw new Error(MESSAGE_VALID_JSON_FAIL);\n    }\n}\nexport function _createJSONData(data, replacer, space) {\n    if (replacer === void 0) { replacer = null; }\n    var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide valid JSON object';\n    try {\n        return JSON.stringify(data, replacer, space);\n    }\n    catch (_a) {\n        throw new Error(MESSAGE_VALID_JSON_FAIL);\n    }\n}\nexport function _createTableMap(data) {\n    return data.map(getEntries).reduce(function (tMap, rowKVs, rowIndex) {\n        return rowKVs.reduce(function (map, _a) {\n            var _b = __read(_a, 2), key = _b[0], value = _b[1];\n            var columnValues = map[key] || Array.from({ length: data.length }).map(function (_) { return ''; });\n            columnValues[rowIndex] =\n                (typeof value !== 'string' ? JSON.stringify(value) : value) || '';\n            map[key] = columnValues;\n            return map;\n        }, tMap);\n    }, Object.create(null));\n}\nexport function _createTableEntries(tableMap, beforeTableEncode) {\n    if (beforeTableEncode === void 0) { beforeTableEncode = function (i) { return i; }; }\n    return beforeTableEncode(getEntries(tableMap).map(function (_a) {\n        var _b = __read(_a, 2), fieldName = _b[0], fieldValues = _b[1];\n        return ({\n            fieldName: fieldName,\n            fieldValues: fieldValues,\n        });\n    }));\n}\nexport function createCSVData(data, delimiter, beforeTableEncode) {\n    if (delimiter === void 0) { delimiter = ','; }\n    if (beforeTableEncode === void 0) { beforeTableEncode = function (i) { return i; }; }\n    if (!data.length)\n        return '';\n    var tableMap = _createTableMap(data);\n    var tableEntries = _createTableEntries(tableMap, beforeTableEncode);\n    var head = tableEntries.map(function (_a) {\n        var fieldName = _a.fieldName;\n        return fieldName;\n    })\n        .join(delimiter) + '\\r\\n';\n    var columns = tableEntries.map(function (_a) {\n        var fieldValues = _a.fieldValues;\n        return fieldValues;\n    })\n        .map(function (column) { return column.map(function (value) { return \"\\\"\" + value.replace(/\\\"/g, '\"\"') + \"\\\"\"; }); });\n    var rows = columns.reduce(function (mergedColumn, column) { return mergedColumn.map(function (value, rowIndex) { return \"\" + value + delimiter + column[rowIndex]; }); });\n    return head + rows.join('\\r\\n');\n}\nexport function _renderTableHTMLText(data, beforeTableEncode) {\n    assert(data.length > 0);\n    var tableMap = _createTableMap(data);\n    var tableEntries = _createTableEntries(tableMap, beforeTableEncode);\n    var head = tableEntries.map(function (_a) {\n        var fieldName = _a.fieldName;\n        return fieldName;\n    })\n        .join('</b></th><th><b>');\n    var columns = tableEntries.map(function (_a) {\n        var fieldValues = _a.fieldValues;\n        return fieldValues;\n    })\n        .map(function (column) { return column.map(function (value) { return \"<td>\" + value + \"</td>\"; }); });\n    var rows = columns.reduce(function (mergedColumn, column) { return mergedColumn\n        .map(function (value, rowIndex) { return \"\" + value + column[rowIndex]; }); });\n    return \"\\n    <table>\\n      <thead>\\n        <tr><th><b>\" + head + \"</b></th></tr>\\n      </thead>\\n      <tbody>\\n        <tr>\" + rows.join(\"</tr>\\n        <tr>\") + \"</tr>\\n      </tbody>\\n    </table>\\n  \";\n}\nexport function createXLSData(data, beforeTableEncode) {\n    if (beforeTableEncode === void 0) { beforeTableEncode = function (i) { return i; }; }\n    if (!data.length)\n        return '';\n    var content = \"<html>\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n  </head >\\n  <body>\\n    \" + _renderTableHTMLText(data, beforeTableEncode) + \"\\n  </body>\\n</html >\\n\";\n    return content;\n}\nexport function createXMLData(data) {\n    var content = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><!DOCTYPE base>\\n\" + _renderXML(data, 'base') + \"\\n\";\n    return content;\n}\nfunction _renderXML(data, tagName, arrayElementTag, spaces) {\n    if (arrayElementTag === void 0) { arrayElementTag = 'element'; }\n    if (spaces === void 0) { spaces = 0; }\n    var tag = normalizeXMLName(tagName);\n    var indentSpaces = indent(spaces);\n    if (data === null || data === undefined) {\n        return indentSpaces + \"<\" + tag + \" />\";\n    }\n    var content = isArray(data)\n        ? data.map(function (item) { return _renderXML(item, arrayElementTag, arrayElementTag, spaces + 2); }).join('\\n')\n        : typeof data === 'object'\n            ? getEntries(data)\n                .map(function (_a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                return _renderXML(value, key, arrayElementTag, spaces + 2);\n            }).join('\\n')\n            : indentSpaces + '  ' + stripHTML(String(data));\n    var contentWithWrapper = indentSpaces + \"<\" + tag + \">\\n\" + content + \"\\n\" + indentSpaces + \"</\" + tag + \">\";\n    return contentWithWrapper;\n}\n"]},"metadata":{},"sourceType":"module"}