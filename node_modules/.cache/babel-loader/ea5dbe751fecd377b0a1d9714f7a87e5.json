{"ast":null,"code":"import _defineProperty from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { Line } from 'react-chartjs-2';\nimport Axios from 'axios';\nimport exportFromJSON from 'export-from-json';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { DropdownButton, Dropdown } from 'react-bootstrap';\nvar divStyle = {\n  position: 'relative',\n  height: '40vh',\n  width: '20vw'\n};\n\nfunction npointsMA(n, price) {\n  var n_points = n;\n  var init_sum = 0;\n\n  for (var i = 0; i < n_points; i++) {\n    init_sum += price[i];\n  }\n\n  var movemean = [];\n\n  for (var i = 0; i < n_points - 1; i++) {\n    movemean.push(null);\n  }\n\n  for (var i = n_points - 1; i < price.length; i++) {\n    movemean.push(init_sum / n_points);\n    init_sum -= price[i - n_points + 1];\n    init_sum += price[i + 1];\n  }\n\n  return movemean;\n} //5 10 20 60 120 144 250 \n\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      year: '',\n      from_dtime: '',\n      to_dtime: '',\n      isLoaded: false,\n      query_data: [],\n      date: [],\n      price: [],\n      graph: '',\n      showdownload: '',\n      data_name: 'deag.csv',\n      file_list: [],\n      dropdown_name: 'Select a file'\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handledwnload = _this.handledwnload.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.Dwnloadbtn = _this.Dwnloadbtn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleGetFileList = _this.handleGetFileList.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFileSelect = _this.handleFileSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  } //handle change\n\n\n  _createClass(App, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      Axios({\n        method: 'post',\n        url: \"https://metal-price-backend.herokuapp.com/getdata/\".concat(this.state.data_name),\n        //headers: {\"Content-Type\": \"application/json\"},\n        data: {\n          from_dtime: this.state.from_dtime,\n          to_dtime: this.state.to_dtime,\n          data_name: this.state.data_name\n        }\n      }).then(function (res) {\n        console.log(\"here\");\n\n        _this2.setState({\n          isLoaded: true,\n          query_data: res.data\n        });\n\n        var x = [];\n        var y = [];\n\n        for (var i in _this2.state.query_data) {\n          x.push(_this2.state.query_data[i].dtime);\n          y.push(_this2.state.query_data[i].price);\n        }\n\n        _this2.setState({\n          date: x,\n          price: y\n        });\n\n        var data = {\n          labels: _this2.state.date,\n          datasets: [{\n            label: \"Silver price\",\n            data: _this2.state.price,\n            radius: 0,\n            borderColor: 'rgb(75, 192, 192)',\n            borderWidth: 1,\n            fill: true,\n            backgroundColor: 'rgba(75, 192, 192, 0.2)'\n          }, {\n            label: \"5 day average\",\n            data: npointsMA(5, _this2.state.price),\n            radius: 0,\n            borderColor: 'rgba(255, 51, 51, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          }, {\n            label: \"20 day average\",\n            data: npointsMA(20, _this2.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          }, {\n            label: \"60 day average\",\n            data: npointsMA(60, _this2.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          }, {\n            label: \"144 day average\",\n            data: npointsMA(144, _this2.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          }]\n        };\n        var options = {\n          scales: {\n            xAxes: [{\n              ticks: {\n                maxTicksLimit: 30\n              }\n            }]\n          },\n          responsive: true,\n          layout: {\n            padding: {\n              top: 10,\n              left: 80,\n              right: 5,\n              bottom: 15\n            }\n          }\n        };\n\n        _this2.setState({\n          graph: /*#__PURE__*/React.createElement(\"div\", {\n            className: \"linechart\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 18\n            }\n          }, /*#__PURE__*/React.createElement(Line, {\n            data: data,\n            options: options,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 19\n            }\n          }))\n        });\n\n        _this2.setState({\n          showdownload: /*#__PURE__*/React.createElement(\"button\", {\n            onClick: _this2.handledwnload,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 25\n            }\n          }, \" Download \")\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"handleGetFileList\",\n    value: function handleGetFileList(event) {\n      var _this3 = this;\n\n      Axios({\n        method: 'get',\n        url: \"https://metal-price-backend.herokuapp.com/get_file_list\"\n      }).then(function (res) {\n        console.log(\"here\");\n\n        _this3.setState({\n          file_list: res.data\n        });\n      });\n    }\n  }, {\n    key: \"handleFileSelect\",\n    value: function handleFileSelect(event, evtkey) {\n      console.log(\"file selected: \".concat(evtkey));\n      this.setState({\n        dropdown_name: event.target.attributes.getNamedItem('title').value,\n        data_name: event.target.attributes.getNamedItem('title').value\n      });\n    }\n  }, {\n    key: \"handledwnload\",\n    value: function handledwnload(event) {\n      var data = this.state.query_data;\n      var filename = \"silver_price_\".concat(this.state.from_dtime, \"-\").concat(this.state.to_dtime);\n      var exportType = 'csv';\n      exportFromJSON({\n        data: data,\n        filename: filename,\n        exportType: exportType\n      });\n    }\n  }, {\n    key: \"Dwnloadbtn\",\n    value: function Dwnloadbtn() {\n      /*\n      if (this.state.showdownload){\n        return (<button onClick={this.handledwnload}> Download </button>);\n      }\n      else{\n        return (<div> </div>);\n      }\n      */\n      //return <button onClick={this.handledwnload}> Download </button>;\n      return /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handledwnload,\n        variant: \"outline-dark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 14\n        }\n      }, \"Download\");\n    }\n  }, {\n    key: \"dropdown\",\n    value: function dropdown() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DropdownButton, {\n        id: \"file-list-dropdown-button\",\n        title: this.state.dropdown_name,\n        onClick: this.handleGetFileList,\n        onSelect: this.handleFileSelect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }\n      }, this.state.file_list.map(function (data) {\n        return /*#__PURE__*/React.createElement(Dropdown.Item, {\n          title: data,\n          key: data,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }\n        }, data);\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"flexbox-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        className: \"settings\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }\n      }, \"From Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n        name: \"from_dtime\",\n        type: \"text\",\n        placeholder: \"YYYY-MM-DD\",\n        value: this.state.from_dtime,\n        onChange: this.handleChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form.Label, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }\n      }, \"To Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n        name: \"to_dtime\",\n        type: \"text\",\n        placeholder: \"YYYY-MM-DD\",\n        value: this.state.to_dtime,\n        onChange: this.handleChange.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }\n      }, \"Submit\")), this.dropdown(), this.state.graph, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }\n      }, this.state.showdownload)));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/xuanmingcui/Documents/prof_chens/metal-price-frontend/src/App.js"],"names":["React","Line","Axios","exportFromJSON","Button","Form","DropdownButton","Dropdown","divStyle","position","height","width","npointsMA","n","price","n_points","init_sum","i","movemean","push","length","App","props","state","year","from_dtime","to_dtime","isLoaded","query_data","date","graph","showdownload","data_name","file_list","dropdown_name","handleChange","bind","handleSubmit","handledwnload","Dwnloadbtn","handleGetFileList","handleFileSelect","event","setState","target","name","value","preventDefault","method","url","data","then","res","console","log","x","y","dtime","labels","datasets","label","radius","borderColor","borderWidth","fill","backgroundColor","hidden","options","scales","xAxes","ticks","maxTicksLimit","responsive","layout","padding","top","left","right","bottom","evtkey","attributes","getNamedItem","filename","exportType","map","dropdown","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport {Line} from 'react-chartjs-2';\nimport Axios from 'axios';\nimport exportFromJSON from 'export-from-json' ;\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { DropdownButton,Dropdown } from 'react-bootstrap';\n\n\n\n\nconst divStyle = {\n  position: 'relative',\n  height: '40vh',\n  width: '20vw'\n};\n\n\nfunction npointsMA(n, price){\n  let n_points = n; \n  let init_sum = 0;\n\n  for (var i = 0; i < n_points; i++){\n    init_sum += price[i];\n}\n\n  const movemean = [];\n\n  for (var i = 0; i < n_points-1; i++){\n    movemean.push(null);\n  }\n\n  for (var i = n_points-1; i < price.length; i++){\n      movemean.push(init_sum/n_points)\n      init_sum -= price[i - n_points + 1]\n      init_sum += price[i + 1]\n  }\n  return movemean\n}\n\n\n//5 10 20 60 120 144 250 \nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      year: '',\n      from_dtime: '',\n      to_dtime: '',\n      isLoaded: false,\n      query_data: [],\n      date: [],\n      price: [],\n      graph: '',\n      showdownload: '',\n      data_name: 'deag.csv',\n      file_list: [],\n      dropdown_name: 'Select a file'\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handledwnload = this.handledwnload.bind(this);\n    this.Dwnloadbtn = this.Dwnloadbtn.bind(this);\n    this.handleGetFileList = this.handleGetFileList.bind(this);\n    this.handleFileSelect = this.handleFileSelect.bind(this);\n    \n  }\n\n//handle change\n\n\n  handleChange(event) {\n    this.setState({[event.target.name]:event.target.value});\n    }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    Axios({\n      method: 'post',\n      url: `https://metal-price-backend.herokuapp.com/getdata/${this.state.data_name}`,\n      //headers: {\"Content-Type\": \"application/json\"},\n      data: {\n        from_dtime: this.state.from_dtime,\n        to_dtime: this.state.to_dtime,\n        data_name: this.state.data_name\n      }}).then((res) => {\n        console.log(\"here\");\n        this.setState({\n          isLoaded: true,\n          query_data: res.data\n        })\n\n        var x = [];\n        var y = [];\n\n        for (var i in this.state.query_data){\n          x.push(this.state.query_data[i].dtime);\n          y.push(this.state.query_data[i].price);\n        }\n\n        this.setState({\n          date: x,\n          price: y\n        })\n\n        const data = {\n          labels: this.state.date,\n          datasets: [{\n            label: \"Silver price\",\n            data: this.state.price,\n            radius: 0,\n            borderColor: 'rgb(75, 192, 192)',\n            borderWidth: 1,\n            fill: true,\n            backgroundColor: 'rgba(75, 192, 192, 0.2)'\n          },\n          {\n            label: \"5 day average\",\n            data: npointsMA(5,this.state.price),\n            radius: 0,\n            borderColor: 'rgba(255, 51, 51, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          },\n          {\n            label: \"20 day average\",\n            data: npointsMA(20,this.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          },\n          {\n            label: \"60 day average\",\n            data: npointsMA(60,this.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          },\n          {\n            label: \"144 day average\",\n            data: npointsMA(144,this.state.price),\n            radius: 0,\n            borderColor: 'rgba(0, 128, 255, 0.8)',\n            borderWidth: 1,\n            fill: false,\n            hidden: true\n          }\n        ]\n        };\n\n        const options = {\n          scales: {\n            xAxes: [{\n              ticks: {\n                maxTicksLimit: 30\n              }\n            }]\n          },\n          responsive: true,\n          layout: {\n            padding: {\n              top: 10,\n              left: 80,\n              right: 5,\n              bottom: 15\n            }\n          }\n        }\n\n        this.setState({\n          graph: <div className=\"linechart\">\n                  <Line \n                    data = {data}\n                    options= {options}\n                    />\n                  </div>\n        });\n\n        this.setState({\n          showdownload: <button onClick={this.handledwnload}> Download </button>\n        })\n\n\n      });\n      event.preventDefault();\n    };\n\n    handleGetFileList(event){\n      Axios({\n        method: 'get',\n        url: `https://metal-price-backend.herokuapp.com/get_file_list`,\n        }).then((res) => {\n          console.log(\"here\");\n          this.setState({\n            file_list: res.data\n          })});\n    };\n\n    handleFileSelect(event,evtkey){\n      console.log(`file selected: ${evtkey}`)\n      this.setState({\n        dropdown_name: event.target.attributes.getNamedItem('title').value,\n        data_name: event.target.attributes.getNamedItem('title').value\n      });\n      \n    };\n\n    handledwnload(event) {\n      const data = this.state.query_data;\n      const filename = `silver_price_${this.state.from_dtime}-${this.state.to_dtime}`;\n      const exportType = 'csv'\n      exportFromJSON({data, filename, exportType});\n    };\n\n\n    Dwnloadbtn(){\n      /*\n      if (this.state.showdownload){\n        return (<button onClick={this.handledwnload}> Download </button>);\n      }\n      else{\n        return (<div> </div>);\n      }\n      */\n      //return <button onClick={this.handledwnload}> Download </button>;\n      return <Button onClick={this.handledwnload} variant='outline-dark'>Download</Button>;\n    };\n\n    dropdown(){\n      return(\n        <div>\n          <DropdownButton id = 'file-list-dropdown-button' \n          title={this.state.dropdown_name} \n          onClick = {this.handleGetFileList}\n          onSelect = {this.handleFileSelect}>\n            {this.state.file_list.map(data => (\n              <Dropdown.Item title={data} key={data}>{data}</Dropdown.Item>\n            ))}\n          </DropdownButton>\n        </div>\n      )\n    }\n\n\n\n\n\n\n\n  render() {\n    return (\n      <>\n      <div class=\"flexbox-container\">\n        <Form onSubmit = {this.handleSubmit} className = 'settings'>\n          <Form.Group className=\"mb-3\">\n            <Form.Label>From Date</Form.Label>\n              <Form.Control \n                name=\"from_dtime\" type=\"text\" placeholder=\"YYYY-MM-DD\"               \n                value={this.state.from_dtime}\n                onChange={this.handleChange.bind(this)}/>\n          </Form.Group>\n          <Form.Group className=\"mb-3\">\n            <Form.Label>To Date</Form.Label>\n              <Form.Control \n                name=\"to_dtime\"type=\"text\" placeholder=\"YYYY-MM-DD\"               \n                value={this.state.to_dtime}\n                onChange={this.handleChange.bind(this)}/>\n          </Form.Group>\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n        </Form>\n        {this.dropdown()}\n        {this.state.graph}\n        <div>\n        {this.state.showdownload}\n        </div>\n\n      </div>\n      \n      \n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}