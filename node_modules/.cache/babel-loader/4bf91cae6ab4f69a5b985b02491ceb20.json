{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\scui\\\\Documents\\\\GitHub\\\\metal-price-frontend\\\\src\\\\App.js\";\nimport React, { useState } from 'react';\nimport './App.css';\nimport { Line } from 'react-chartjs-2';\nimport Axios from 'axios';\nimport exportFromJSON from 'export-from-json';\nimport { registerables } from 'chart.js';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst divStyle = {\n  position: 'relative',\n  height: '40vh',\n  width: '20vw'\n};\n\nfunction npointsMA(n, price) {\n  let init_sum = 0;\n\n  for (var i = 0; i < n - 1; i++) {\n    init_sum += price[i];\n  }\n\n  const movemean = [];\n\n  for (var i = 0; i < n; i++) {\n    movemean.push(null);\n  }\n\n  for (var i = n - 1; i < price.length; i++) {\n    movemean.push(init_sum / n);\n    init_sum -= price[i - n + 1];\n    init_sum += price[i + 1];\n  }\n\n  return movemean;\n} //5 10 20 60 120 144 250 \n\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      year: '',\n      from_dtime: '',\n      to_dtime: '',\n      isLoaded: false,\n      query_data: [],\n      date: [],\n      price: [],\n      graph: '',\n      showdownload: '',\n      avg5: false,\n      avg10: false,\n      avg20: false,\n      avg60: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handledwnload = this.handledwnload.bind(this);\n    this.Dwnloadbtn = this.Dwnloadbtn.bind(this);\n    this.handlecheckboxchange = this.handlecheckboxchange.bind(this);\n  } //handle change\n\n\n  handleChange(event) {\n    console.log(event.target.name, event.target.value);\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handlecheckboxchange(event) {//const ref = useRef();\n    //const isDataShown = ref.isDatasetVisible(event.value);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    console.log(\"there\");\n    Axios({\n      method: 'post',\n      url: 'https://metal-price-backend.herokuapp.com/silver',\n      //headers: {\"Content-Type\": \"application/json\"},\n      data: {\n        year: this.state.year,\n        from_dtime: this.state.from_dtime,\n        to_dtime: this.state.to_dtime\n      }\n    }).then(res => {\n      console.log(\"here\");\n      this.setState({\n        isLoaded: true,\n        query_data: res.data\n      });\n      var x = [];\n      var y = [];\n\n      for (var i in this.state.query_data) {\n        x.push(this.state.query_data[i].dtime);\n        y.push(this.state.query_data[i].price);\n      }\n\n      this.setState({\n        date: x,\n        price: y\n      });\n      const data = {\n        labels: this.state.date,\n        datasets: [{\n          label: \"Silver price chart\",\n          data: this.state.price,\n          radius: 0,\n          borderColor: 'rgb(75, 192, 192)',\n          borderWidth: 1,\n          fill: true,\n          backgroundColor: 'rgba(75, 192, 192, 0.2)'\n        }, {\n          label: \"5 point average\",\n          data: npointsMA(5, this.state.price),\n          radius: 0,\n          borderColor: 'rgba(255, 51, 51, 0.8)',\n          borderWidth: 1,\n          fill: false\n        }, {\n          label: \"20 point average\",\n          data: npointsMA(20, this.state.price),\n          radius: 0,\n          borderColor: 'rgba(0, 128, 255, 0.8)',\n          borderWidth: 1,\n          fill: false\n        }]\n      };\n      const options = {\n        scales: {\n          xAxes: [{\n            ticks: {\n              maxTicksLimit: 30\n            }\n          }]\n        },\n        responsive: true,\n        maintainAspectRatio: false,\n        layout: {\n          padding: {\n            top: 10,\n            left: 80,\n            right: 5,\n            bottom: 15\n          }\n        }\n      };\n      this.setState({\n        graph: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"linechart\",\n          children: [/*#__PURE__*/_jsxDEV(Line, {\n            data: data,\n            options: options\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"3 day average\", /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"avg5\",\n              type: \"checkbox\",\n              value: \"1\",\n              onChange: this.handlecheckboxchange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 18\n        }, this)\n      });\n      this.setState({\n        showdownload: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.handledwnload,\n          children: \" Download \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }, this)\n      });\n    });\n    event.preventDefault();\n  }\n\n  handledwnload(event) {\n    const data = this.state.query_data;\n    const filename = `silver_price_${this.state.from_dtime}-${this.state.to_dtime}`;\n    const exportType = 'csv';\n    exportFromJSON({\n      data,\n      filename,\n      exportType\n    });\n  }\n\n  Dwnloadbtn() {\n    /*\r\n    if (this.state.showdownload){\r\n      return (<button onClick={this.handledwnload}> Download </button>);\r\n    }\r\n    else{\r\n      return (<div> </div>);\r\n    }\r\n    */\n    //return <button onClick={this.handledwnload}> Download </button>;\n    return /*#__PURE__*/_jsxDEV(Button, {\n      onClick: this.handledwnload,\n      variant: \"outline-dark\",\n      children: \"Download\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 14\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flexbox-container\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleSubmit,\n          className: \"settings\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"year\",\n              type: \"number\",\n              placeholder: \"YYYY\",\n              value: this.state.year,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"From Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"from_dtime\",\n              type: \"text\",\n              placeholder: \"YYYY-MM-DD\",\n              value: this.state.from_dtime,\n              onChange: this.handleChange.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"To Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"to_dtime\",\n              type: \"text\",\n              placeholder: \"YYYY-MM-DD\",\n              value: this.state.to_dtime,\n              onChange: this.handleChange.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 9\n        }, this), this.state.graph, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.showdownload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 7\n      }, this)\n    }, void 0, false);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/scui/Documents/GitHub/metal-price-frontend/src/App.js"],"names":["React","useState","Line","Axios","exportFromJSON","registerables","Button","Form","divStyle","position","height","width","npointsMA","n","price","init_sum","i","movemean","push","length","App","Component","constructor","props","state","year","from_dtime","to_dtime","isLoaded","query_data","date","graph","showdownload","avg5","avg10","avg20","avg60","handleChange","bind","handleSubmit","handledwnload","Dwnloadbtn","handlecheckboxchange","event","console","log","target","name","value","setState","preventDefault","method","url","data","then","res","x","y","dtime","labels","datasets","label","radius","borderColor","borderWidth","fill","backgroundColor","options","scales","xAxes","ticks","maxTicksLimit","responsive","maintainAspectRatio","layout","padding","top","left","right","bottom","filename","exportType","render"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport './App.css';\r\nimport {Line} from 'react-chartjs-2';\r\nimport Axios from 'axios';\r\nimport exportFromJSON from 'export-from-json' ;\r\nimport { registerables } from 'chart.js';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\n\r\n\r\n\r\n\r\nconst divStyle = {\r\n  position: 'relative',\r\n  height: '40vh',\r\n  width: '20vw'\r\n};\r\n\r\n\r\nfunction npointsMA(n, price){\r\n\r\n   let init_sum = 0;\r\n\r\n  for (var i = 0; i < n-1; i++){\r\n    init_sum += price[i];\r\n}\r\n\r\n  const movemean = [];\r\n\r\n  for (var i = 0; i < n; i++){\r\n    movemean.push(null);\r\n  }\r\n\r\n  for (var i = n-1; i < price.length; i++){\r\n      movemean.push(init_sum/n)\r\n      init_sum -= price[i - n + 1]\r\n      init_sum += price[i + 1]\r\n  }\r\n  return movemean\r\n}\r\n\r\n//5 10 20 60 120 144 250 \r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      year: '',\r\n      from_dtime: '',\r\n      to_dtime: '',\r\n      isLoaded: false,\r\n      query_data: [],\r\n      date: [],\r\n      price: [],\r\n      graph: '',\r\n      showdownload: '',\r\n      avg5: false,\r\n      avg10: false,\r\n      avg20: false,\r\n      avg60: false\r\n\r\n\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handledwnload = this.handledwnload.bind(this);\r\n    this.Dwnloadbtn = this.Dwnloadbtn.bind(this);\r\n    this.handlecheckboxchange = this.handlecheckboxchange.bind(this);\r\n  }\r\n\r\n//handle change\r\n\r\n\r\n  handleChange(event) {\r\n    console.log(event.target.name, event.target.value);\r\n    this.setState({[event.target.name]:event.target.value});\r\n    }\r\n\r\n  handlecheckboxchange(event){\r\n\r\n    //const ref = useRef();\r\n    //const isDataShown = ref.isDatasetVisible(event.value);\r\n\r\n\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    console.log(\"there\");\r\n    Axios({\r\n      method: 'post',\r\n      url: 'https://metal-price-backend.herokuapp.com/silver',\r\n      //headers: {\"Content-Type\": \"application/json\"},\r\n      data: {\r\n        year: this.state.year,\r\n        from_dtime: this.state.from_dtime,\r\n        to_dtime: this.state.to_dtime,\r\n      }}).then((res) => {\r\n        console.log(\"here\");\r\n        this.setState({\r\n          isLoaded: true,\r\n          query_data: res.data\r\n        })\r\n\r\n \r\n        var x = [];\r\n        var y = [];\r\n\r\n        for (var i in this.state.query_data){\r\n          x.push(this.state.query_data[i].dtime);\r\n          y.push(this.state.query_data[i].price);\r\n        }\r\n\r\n        this.setState({\r\n          date: x,\r\n          price: y\r\n        })\r\n\r\n        const data = {\r\n          labels: this.state.date,\r\n          datasets: [{\r\n            label: \"Silver price chart\",\r\n            data: this.state.price,\r\n            radius: 0,\r\n            borderColor: 'rgb(75, 192, 192)',\r\n            borderWidth: 1,\r\n            fill: true,\r\n            backgroundColor: 'rgba(75, 192, 192, 0.2)'\r\n          },\r\n          {\r\n            label: \"5 point average\",\r\n            data: npointsMA(5,this.state.price),\r\n            radius: 0,\r\n            borderColor: 'rgba(255, 51, 51, 0.8)',\r\n            borderWidth: 1,\r\n            fill: false\r\n          },\r\n          {\r\n            label: \"20 point average\",\r\n            data: npointsMA(20,this.state.price),\r\n            radius: 0,\r\n            borderColor: 'rgba(0, 128, 255, 0.8)',\r\n            borderWidth: 1,\r\n            fill: false\r\n          }]\r\n        };\r\n\r\n        const options = {\r\n          scales: {\r\n            xAxes: [{\r\n              ticks: {\r\n                maxTicksLimit: 30\r\n              }\r\n            }]\r\n          },\r\n          responsive: true,\r\n          maintainAspectRatio:false,\r\n          layout: {\r\n            padding: {\r\n              top: 10,\r\n              left: 80,\r\n              right: 5,\r\n              bottom: 15\r\n            }\r\n          }\r\n        }\r\n\r\n        this.setState({\r\n          graph: <div className=\"linechart\">\r\n                  <Line \r\n                    data = {data}\r\n                    options= {options}\r\n                    />\r\n                  \r\n                  \r\n                  <label>\r\n                    3 day average\r\n                    <input\r\n                      name=\"avg5\"\r\n                      type=\"checkbox\"\r\n                      value=\"1\"\r\n                      onChange={this.handlecheckboxchange}\r\n                      \r\n                      />\r\n                  </label> \r\n                  </div>\r\n        });\r\n\r\n        this.setState({\r\n          showdownload: <button onClick={this.handledwnload}> Download </button>\r\n        })\r\n\r\n\r\n      });\r\n      event.preventDefault();\r\n    }\r\n\r\n    handledwnload(event) {\r\n      const data = this.state.query_data;\r\n      const filename = `silver_price_${this.state.from_dtime}-${this.state.to_dtime}`;\r\n      const exportType = 'csv'\r\n      exportFromJSON({data, filename, exportType});\r\n    }\r\n\r\n    Dwnloadbtn(){\r\n      /*\r\n      if (this.state.showdownload){\r\n        return (<button onClick={this.handledwnload}> Download </button>);\r\n      }\r\n      else{\r\n        return (<div> </div>);\r\n      }\r\n      */\r\n      //return <button onClick={this.handledwnload}> Download </button>;\r\n      return <Button onClick={this.handledwnload} variant='outline-dark'>Download</Button>;\r\n    }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      <div class=\"flexbox-container\">\r\n        <Form onSubmit = {this.handleSubmit} className = 'settings'>\r\n          <Form.Group className=\"mb-3\" >\r\n            <Form.Label>Year</Form.Label>\r\n              <Form.Control \r\n                name=\"year\" type=\"number\" placeholder=\"YYYY\"               \r\n                value={this.state.year}\r\n                onChange={this.handleChange}/>\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>From Date</Form.Label>\r\n              <Form.Control \r\n                name=\"from_dtime\" type=\"text\" placeholder=\"YYYY-MM-DD\"               \r\n                value={this.state.from_dtime}\r\n                onChange={this.handleChange.bind(this)}/>\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\">\r\n            <Form.Label>To Date</Form.Label>\r\n              <Form.Control \r\n                name=\"to_dtime\"type=\"text\" placeholder=\"YYYY-MM-DD\"               \r\n                value={this.state.to_dtime}\r\n                onChange={this.handleChange.bind(this)}/>\r\n          </Form.Group>\r\n          <Button variant=\"primary\" type=\"submit\">\r\n            Submit\r\n          </Button>\r\n        </Form>\r\n        {this.state.graph}\r\n        <div>\r\n        {this.state.showdownload}\r\n        </div>\r\n\r\n      </div>\r\n      \r\n      \r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}